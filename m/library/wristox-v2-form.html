<div id=D__ID>
    <!--third html start -->
    <div class="container mt-95 mb-3">
        <div class="row">
            <!-- form container start -->
            <div class="col-12 col-lg-12 col-md-12 col-sm-12 mx-auto formbox">
                <div class="row">
                    <div class="col-12">
                        <!-- form start -->
                        <form id="F__ID">
                            <h3 id="title__ID"></h3>
                            <!-- participant part for all tsak forms -------------------->
                            <div id="participant_div__ID">
                                <div class="form-group">
                                    <fieldset class="subquestions">
                                        <label><span class="">Participant</span>
                                            <input type=text name="Participant" class=form-control id=Participant__ID
                                                data-id="Participant" />
                                        </label>
                                        <label><span class="">Participant ID</span>
                                            <input type=text name="Participant_uid" class=form-control readonly />
                                        </label>
                                    </fieldset>
                                </div>
                            </div>
                            <!-- form group -->
                            <div class="form-group">
                                <label><span class="">Is WristOx data available for 2 nights?</span></label>
                                <div class="questiongroup ">
                                    <fieldset class="subquestions">
                                        <label class="radiobuttons">
                                          <input type="radio" name="wristox_data" value="0" required>
                                          <span class="checkmark"></span> No</label><br>
                                        <label class="radiobuttons">
                                          <input type="radio" name="wristox_data" value="1">
                                          <span class="checkmark"></span> Yes</label><br>
                                    </fieldset>
                                </div>
                            </div>
                            <div class="form-group">
                                <label><span class="">ODI</span></label>
                                <div class="questiongroup ">
                                    <fieldset class="">
                                        <input type=number step=0.1 class="form-control" style="width:auto" name=odi readonly>
                                    </fieldset>
                                </div>
                            </div>
                            <div class="form-group">
                                <label><span class="">WristOx recording date:</span></label>
                                <div class="questiongroup ">
                                    <fieldset class="">
                                        <input type=date class="form-control" name=wristox_date>
                                    </fieldset>
                                </div>
                            </div>
                            <div class="form-group">
                                <label><span class="">Duration:</span></label>
                                <div class="questiongroup ">
                                    <fieldset class="">
                                        <label><span class="">&nbsp;&nbsp;HH</span>
                                            <input type =number min="0" max="23" class="form-control"  id="hh__ID" name="wristox_duration_hh" required>
                                        </label>
                                        <label><span class="">&nbsp;&nbsp;MM</span>
                                            <input type =number min="0" max="59" class="form-control"  id="mm__ID" name="wristox_duration_mm" required>
                                        </label>
                                        <label><span class="">&nbsp;&nbsp;SS</span>
                                            <input type =number min="0" max="59" class="form-control"  id="ss__ID" name="wristox_duration_ss" required>
                                        </label>            
                                        <label><span class="">&nbsp;&nbsp;Hours</span>
                                            <input type=number step="0.001" class="form-control" name=wristox_duration readonly>
                                        </label>
                                    </fieldset>
                                </div>
                            </div>
                            <div class="form-group">
                                <label><span class="">Analysed</span></label>
                                <div class="questiongroup ">
                                    <fieldset class="">
                                        <label><span class="">&nbsp;&nbsp;HH</span>
                                            <input type =number min="0" max="23" class="form-control"  id="hha1__ID" name="wristox_analysed_hh" required>
                                        </label>
                                        <label><span class="">&nbsp;&nbsp;MM</span>
                                            <input type =number min="0" max="59" class="form-control"  id="mma1__ID" name="wristox_analysed_mm" required>
                                        </label>
                                        <label><span class="">&nbsp;&nbsp;SS</span>
                                            <input type =number min="0" max="59" class="form-control"  id="ssa1__ID" name="wristox_analysed_ss" required>
                                        </label>            
                                        <label><span class="">&nbsp;&nbsp;Hours</span>
                                            <input type=number step="0.001" class="form-control" style="width:auto" name=wristox_analysed readonly>
                                        </label>
                                    </fieldset>
                                </div>
                            </div>
                            <div class="form-group">
                                <label><span class="">SpO2 total events:</span></label>
                                <div class="questiongroup ">
                                    <fieldset class="">
                                        <input type=number step=1 class="form-control" style="width:auto" name=wristox_spo2_total_events >
                                    </fieldset>
                                </div>
                            </div>
                            <div class="form-group">
                                <label><span class="">SpO2 adjusted index (1/hr):</span></label>
                                <div class="questiongroup ">
                                    <fieldset class="">
                                        <input type=number step=0.1 class="form-control" style="width:auto" name=wristox_spo2_adjusted_index>
                                    </fieldset>
                                </div>
                            </div>
                            <div class="form-group">
                                <label><span class="">Pulse total events:</span></label>
                                <div class="questiongroup ">
                                    <fieldset class="">
                                        <input type=number step=1 class="form-control" style="width:auto" name=wristox_pulse_total_events>
                                    </fieldset>
                                </div>
                            </div>
                            <div class="form-group">
                                <label><span class="">Pulse adjusted index (1/hr):</span></label>
                                <div class="questiongroup ">
                                    <fieldset class="">
                                        <input type=number step=0.1 class="form-control" style="width:auto" name=wristox_pulse_adjusted_index>
                                    </fieldset>
                                </div>
                            </div>
                            <div class="form-group">
                                <label><span class="">Time (%) below 90%:</span></label>
                                <div class="questiongroup ">
                                    <fieldset class="">
                                        <input type=number step=0.1 class="form-control" style="width:auto" name=wristox_time_below_90>
                                    </fieldset>
                                </div>
                            </div>
                            <div class="form-group">
                                <label><span class="">Basal SpO2 (%):</span></label>
                                <div class="questiongroup ">
                                    <fieldset class="">
                                        <input type=number step=0.1 class="form-control" style="width:auto" name=wristox_basal_spo2>
                                    </fieldset>
                                </div>
                            </div>
                            <div class="form-group">
                                <label><span class="">Time (min) &lt;88%:</span></label>
                                <div class="questiongroup ">
                                    <fieldset class="">
                                        <input type=number step=0.1 class="form-control" style="width:auto" name=wristox_time_88>
                                    </fieldset>
                                </div>
                            </div>
                            <div class="form-group">
                                <label><span class="">Minimum SpO2 (%):</span></label>
                                <div class="questiongroup ">
                                    <fieldset class="">
                                        <input type=number step=0.1 class="form-control" style="width:auto" name=wristox_minimun_spo2>
                                    </fieldset>
                                </div>
                            </div>
                            <div class="form-group">
                                <label><span class="">Av. g. Low SpO2 (%):</span></label>
                                <div class="questiongroup ">
                                    <fieldset class="">
                                        <input type=number step=0.1 class="form-control" style="width:auto" name=wristox_av_low_spo2>
                                    </fieldset>
                                </div>
                            </div>
                            <div class="form-group">
                                <label><span class="">Desaturation event: </span></label>
                                <div class="questiongroup ">
                                    <fieldset class="">
                                        <input type=text class="form-control" style="width:auto" name=wristox_desaturation_event>
                                    </fieldset>
                                </div>
                            </div>
                            <div class="row px-4">
                                <div class='col'>
                                    <span>File</span>
                                    <div class="form-control">
                                        <u style='cursor:pointer' id=link_File_Name__ID></u>
                                        <br>
                                        <input type="file" name=File_Name style="margin-top:6px" /> &nbsp&nbsp&nbsp
                                        <button type="button" id=x_File_Name__ID>Remove</button>
                                    </div>
                                </div>
                            </div>
                            <div id="night_2__ID">
                                <br>
                                <h3>Night 2</h3>
                                <div class="form-group">
                                    <label><span class="">WristOx recording date:</span></label>
                                    <div class="questiongroup ">
                                        <fieldset class="">
                                            <input type=date class="form-control" style="width:auto" name=wristox_date_2>
                                        </fieldset>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label><span class="">Duration:</span></label>
                                    <div class="questiongroup ">
                                        <fieldset class="">
                                            <label><span class="">&nbsp;&nbsp;HH</span>
                                                <input type =number min="0" max="23" class="form-control"  id="hh2__ID" name="wristox_duration_hh_2" required>
                                            </label>
                                            <label><span class="">&nbsp;&nbsp;MM</span>
                                                <input type =number min="0" max="59" class="form-control"  id="mm2__ID" name="wristox_duration_mm_2" required>
                                            </label>
                                            <label><span class="">&nbsp;&nbsp;SS</span>
                                                <input type =number min="0" max="59" class="form-control"  id="ss2__ID" name="wristox_duration_ss_2" required>
                                            </label>            
                                            <label><span class="">&nbsp;&nbsp;Hours</span>
                                                <input type=number step="0.001" class="form-control" name=wristox_duration_2 readonly>
                                            </label>
                                        </fieldset>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label><span class="">Analysed</span></label>
                                    <div class="questiongroup ">
                                        <fieldset class="">
                                            <label><span class="">&nbsp;&nbsp;HH</span>
                                                <input type =number min="0" max="23" class="form-control"  id="hha2__ID" name="wristox_analysed_hh_2" required>
                                            </label>
                                            <label><span class="">&nbsp;&nbsp;MM</span>
                                                <input type =number min="0" max="59" class="form-control"  id="mma2__ID" name="wristox_analysed_mm_2" required>
                                            </label>
                                            <label><span class="">&nbsp;&nbsp;SS</span>
                                                <input type =number min="0" max="59" class="form-control"  id="ssa2__ID" name="wristox_analysed_ss_2" required>
                                            </label>            
                                            <label><span class="">&nbsp;&nbsp;Hours</span>
                                                <input type=number step="0.001" class="form-control" style="width:auto" name=wristox_analysed_2 readonly>
                                            </label>
                                        </fieldset>
                                    </div>
                                </div>
                                    <div class="form-group">
                                    <label><span class="">SpO2 total events:</span></label>
                                    <div class="questiongroup ">
                                        <fieldset class="">
                                            <input type=number step=1 class="form-control" style="width:auto" name=wristox_spo2_total_events_2>
                                        </fieldset>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label><span class="">SpO2 adjusted index (1/hr):</span></label>
                                    <div class="questiongroup ">
                                        <fieldset class="">
                                            <input type=number step=0.1 class="form-control" style="width:auto" name=wristox_spo2_adjusted_index_2>
                                        </fieldset>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label><span class="">Pulse total events:</span></label>
                                    <div class="questiongroup ">
                                        <fieldset class="">
                                            <input type=number step=1 class="form-control" style="width:auto" name=wristox_pulse_total_events_2>
                                        </fieldset>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label><span class="">Pulse adjusted index (1/hr):</span></label>
                                    <div class="questiongroup ">
                                        <fieldset class="">
                                            <input type=number step=0.1 class="form-control" style="width:auto" name=wristox_pulse_adjusted_index_2>
                                        </fieldset>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label><span class="">Time (%) below 90%:</span></label>
                                    <div class="questiongroup ">
                                        <fieldset class="">
                                            <input type=number step=0.1 class="form-control" style="width:auto" name=wristox_time_below_90_2>
                                        </fieldset>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label><span class="">Basal SpO2 (%):</span></label>
                                    <div class="questiongroup ">
                                        <fieldset class="">
                                            <input type=number step=0.1 class="form-control" style="width:auto" name=wristox_basal_spo2_2>
                                        </fieldset>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label><span class="">Time (min) &lt;88%:</span></label>
                                    <div class="questiongroup ">
                                        <fieldset class="">
                                            <input type=number step=0.1 class="form-control" style="width:auto" name=wristox_time_88_2>
                                        </fieldset>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label><span class="">Minimum SpO2 (%):</span></label>
                                    <div class="questiongroup ">
                                        <fieldset class="">
                                            <input type=number step=0.1 class="form-control" style="width:auto" name=wristox_minimun_spo2_2>
                                        </fieldset>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label><span class="">Av. g. Low SpO2 (%):</span></label>
                                    <div class="questiongroup ">
                                        <fieldset class="">
                                            <input type=number step=0.1 class="form-control" style="width:auto" name=wristox_av_low_spo2_2>
                                        </fieldset>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label><span class="">Desaturation event: </span></label>
                                    <div class="questiongroup ">
                                        <fieldset class="">
                                            <input type=text class="form-control" style="width:auto" name=wristox_desaturation_event_2>
                                        </fieldset>
                                    </div>
                                </div>
                                <div class="row px-4">
                                    <div class='col'>
                                        <span>File</span>
                                        <div class="form-control">
                                            <u style='cursor:pointer' id=link_File_Name_2__ID></u>
                                            <br>
                                            <input type="file" name=File_Name_2 style="margin-top:6px" /> &nbsp&nbsp&nbsp
                                            <button type="button" id=x_File_Name_2__ID>Remove</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            VmInclude: __CURRENT_PATH__/modification_status.html                        
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    VmInclude:__COMPONENT__/m/model.01.html
    <script>
        function F__ID() {
            //-------------------------------------
            VmInclude: '__COMPONENT__/f/form.01.js'
            VmInclude: __CURRENT_PATH__/shared-form.js
            //-------------------------------------
            var load2 = m.load;
            m.load = function () {
                load2();
                if ( $('[type="date"]').prop('type') != 'date' ) {
                    $('[type="date"]').datepicker();
                }
                if($('#F__ID input[name=wristox_data]:checked').val()==1) $('#night_2__ID').show();
                else  $('#night_2__ID').hide();
            }
            //-------------------------------------
            $('#F__ID input[name=wristox_data]').change(function(){
                if($("input[name='wristox_data']:checked").val()=='1'){
                    $('#night_2__ID').show();
                }
                else {
                    $('#night_2__ID').hide();
                }
            });
            //-------------------------------------
            $("#D__ID #hh__ID").on('change', function () {
                $("input[name='wristox_duration']").val( calc_time())
            });
            $("#D__ID #mm__ID").on('change', function () {
                $("input[name='wristox_duration']").val( calc_time())
            });
            $("#D__ID #ss__ID").on('change', function () {
                $("input[name='wristox_duration']").val( calc_time())
            });
            calc_time=function(){
                console.log("a"+$("#D__ID #hh__ID").val()+"a")
                if($("#D__ID #hh__ID").val()!="" && $("#D__ID #mm__ID").val()!="" && $("#D__ID #ss__ID").val()!="" ){
                    var dur=((parseInt($('#hh__ID').val())*3600+parseInt($('#mm__ID').val())*60+parseInt($('#ss__ID').val()))/3600).toFixed(3)
                    return dur
                }
                else{
                    return "";
                }
            }
            //-------------------------------------
            $("#D__ID #hha1__ID").on('change', function () {
                $("input[name='wristox_analysed']").val( calc_time2())
            });
            $("#D__ID #mma1__ID").on('change', function () {
                $("input[name='wristox_analysed']").val( calc_time2())
            });
            $("#D__ID #ssa1__ID").on('change', function () {
                $("input[name='wristox_analysed']").val( calc_time2())
            });
            calc_time2=function(){
                if($("#D__ID #hha1__ID").val()!="" && $("#D__ID #mma1__ID").val()!="" && $("#D__ID #ssa1__ID").val()!=""){
                    var dur=((parseInt($('#hha1__ID').val())*3600+parseInt($('#mma1__ID').val())*60+parseInt($('#ssa1__ID').val()))/3600).toFixed(3)
                    return dur
                }
                else{
                    return "";
                }
            }
            //-------------------------------------
            $("#D__ID #hh2__ID").on('change', function () {
                $("input[name='wristox_duration_2']").val( calc_time3())
            });
            $("#D__ID #mm2__ID").on('change', function () {
                $("input[name='wristox_duration_2']").val( calc_time3())
            });
            $("#D__ID #ss2__ID").on('change', function () {
                $("input[name='wristox_duration_2]").val( calc_time())
            });
            calc_time3=function(){
                if($("#D__ID #hh2__ID").val()!="" && $("#D__ID #mm2__ID").val()!="" && $("#D__ID #ss2__ID").val()!=""){
                    var dur=((parseInt($('#hh2__ID').val())*3600+parseInt($('#mm2__ID').val())*60+parseInt($('#ss2__ID').val()))/3600).toFixed(3)
                    return dur
                }
                else{
                    return "";
                }
            }
            //-------------------------------------
            $("#D__ID #hha2__ID").on('change', function () {
                $("input[name='wristox_analysed_2']").val( calc_time4())
            });
            $("#D__ID #mma2__ID").on('change', function () {
                $("input[name='wristox_analysed_2']").val( calc_time4())
            });
            $("#D__ID #ssa2__ID").on('change', function () {
                $("input[name='wristox_analysed_2']").val( calc_time4())
            });
            calc_time4=function(){
                if($("#D__ID #hha2__ID").val()!="" && $("#D__ID #mma2__ID").val()!="" && $("#D__ID #ssa2__ID").val()!=""){
                    var dur=((parseInt($('#hha2__ID').val())*3600+parseInt($('#mma2__ID').val())*60+parseInt($('#ssa2__ID').val()))/3600).toFixed(3)
                    return dur
                }
                else{
                    return "";
                }
            }
            //-------------------------------------
            var before_submit=m.before_submit;
            m.before_submit=function(data,index){
                console.log(isNaN(parseInt(data.wristox_spo2_adjusted_index_2)) +' - '+isNaN(parseInt(data.wristox_spo2_adjusted_index)))
                if(isNaN(parseInt(data.wristox_spo2_adjusted_index_2)) || isNaN(parseInt(data.wristox_spo2_adjusted_index))){
                    data.odi=data.wristox_spo2_adjusted_index;
                }
                else{
                    data.odi=((parseInt(data.wristox_spo2_adjusted_index_2) + parseInt(data.wristox_spo2_adjusted_index))/2).toFixed(1);
                }
              return before_submit(data,index);
          }
          //-------------------------------------

        }
    </script>
    <style>
        #D__ID .mt-95 {
            max-width: 800px;
        }

        VmInclude:__CURRENT_PATH__/wappsystem-form.css
    </style>
</div>